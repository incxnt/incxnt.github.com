<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/style.css" />
<!--[if lt IE 9]><script src="/js/html5shiv/dist/html5shiv.js"></script><![endif]-->
<!-- data collection -->
<!-- Page based information v1.0.0 -->
<title>data collection</title>
<meta name="description" content="XNT focus on visualization and web map">
<meta name="keywords" content="visualization, map, XNT, 数据可视化, 信息可视化, 地图">
<!-- Page based information v1.0.0 -->
<!-- Library Version v1.0.0 -->
<script src="/js/jquery/jquery-1.8.2.min.js"></script>
<script src="/js/miso-ds/miso.ds.deps.ie.min.0.3.0.js"></script>
<script src="/js/highcharts/highcharts.js"></script>
<!-- Library Version v1.0.0 -->
</head>
<body>
<!--
<form id="collection">
电子邮件: <input type="text" name="email" id="email" value="" />
<input type="submit" value="提交" />
</form>
-->
<script type="text/javascript">
var ds = new Miso.Dataset({
        url : "crudeoil.csv",
        delimiter : ",",
        columns : [
          { name : "Year", type : "time", format : "YYYY" }
        ]
      });
      
      ds.fetch({
        success : function() {
          chart = new Highcharts.Chart({
            chart: {
              renderTo: 'lineChartContainer',
              type: 'line',
              marginRight: 130,
              marginBottom: 25
            },
            title: {
              text: 'World Crude Oil Barrel Production (1,000) per unit',
              x: -20 //center
            },
            subtitle: {
              text: 'Src: http://www.infochimps.com/datasets/world-crude-oil-production-1980-to-2004',
              x: -20
            },
            xAxis: {
              categories: _.map(this.column("Year").data, function(year) { 
                return year.format("YY"); 
              })
            },
            yAxis: {
              title: {
                text: this.columnNames()[1]
              },
              plotLines: [{
                value: 0,
                width: 10000,
                color: '#808080'
              }]
            },
            tooltip: {
              formatter: function() {
                return '<b>'+ this.series.name +'</b><br/>'+
                this.x +': '+ this.y;
              }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -10,
                y: 100,
                borderWidth: 0
            },
            series: [{
                name: 'World Production',
                data: this.column("Crude oil production (1000 barrels per day)").data
            }]
          });
        }
      });
/*
var ds = new Miso.Dataset({
	url : 'datads.csv',
	delimiter : ',',
	resetOnFetch : true,
	// sync : true
});
ds.fetch({
	success : function() {
		this.add({
			id : 1,
			number : 1
		});
	}
});

$(document).ready(function(){
	$('#collection').submit(function(){
		var email = $('#email').val();
		ds.fetch({
			success : function() {
				this.add({email : email});
			}
		});
	});
});
*/
</script>
</body>
</html>