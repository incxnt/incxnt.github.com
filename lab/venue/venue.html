<!DOCTYPE html>
    <html lang="zh-CN">
        <head>
            <meta charset="UTF-8">
            <title></title>
        </head>
        <body>
            <script src="/js/dataset-0.4.1/dist/miso.ds.deps.ie.min.0.4.1.js"></script>
            <script>
                // We will only make 5 requests in this example
                var requests = 5, 
                    madeRequests = 0;

                // query twitter for tweets containing the term "javascript"
                // and get 5 per page. Note that twitter uses jsonp requests, 
                // so we toggle that flag too.
                var ds = new Miso.Dataset({
                    url : "https://api.twitter.com/1/geo/search.json?query=china",
                    interval : 1000,
                    jsonp : true,
                    // Because of the structure of tweets:
                    // https://dev.twitter.com/docs/api/1/get/search
                    // we actually extract the rows from the returned data first.
                    extract : function(data) {
                        return data.result;
                    }
                });

                ds.fetch({
                    success : function() {
                        // track how many requests we've made
                        madeRequests++;
                        // If we reached our max
                        if (madeRequests >= requests) {
                            // stop the importer.
                            this.importer.stop();
                            // output our current collection of tweets
                            console.log(ds.column("coordinates").data);
                        }
                        // update the number of rows we now have.
                        console.log(madeRequests, ds.length);
                    }
                });
            </script>
        </body>
    </html>