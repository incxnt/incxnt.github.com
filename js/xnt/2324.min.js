var cloudmadeKey="e6e22dcc8e474b679084e83b0a0845fc";var cloudmadeStyle=22677;var cloudmadeUrl="http://{s}.tile.cloudmade.com/"+cloudmadeKey+"/"+cloudmadeStyle+"/256/{z}/{x}/{y}.png";var cloudmadeMap=new L.tileLayer(cloudmadeUrl);var mapCenter=new L.LatLng(35.86166,104.195397);var initZoom=4;var minZoom=4;var maxZoom=4;var map=new L.map("map",{attributionControl:false,center:mapCenter,zoom:initZoom,minZoom:minZoom,maxZoom:maxZoom,layers:[cloudmadeMap]});var geojson=L.geoJson(provinceData,{style:style,onEachFeature:onEachFeature}).addTo(map);var info=L.control();info.onAdd=function(a){this._div=L.DomUtil.create("div","info");this.update();return this._div};info.update=function(a){this._div.innerHTML="<h4>Population Density</h4>"+(a?"<b>"+a.name+"</b><br />"+a.density+" people / km<sup>2</sup>":"Hover over a province")};info.addTo(map);var legend=L.control({position:"bottomright"});legend.onAdd=function(c){var e=L.DomUtil.create("div","info legend"),a=[0,10,20,50,100,200,500,1000],d=[];for(var b=0;b<a.length;b++){e.innerHTML+='<i style="background:'+getColor(a[b]+1)+'"></i> '+a[b]+(a[b+1]?"&ndash;"+a[b+1]+"<br>":"+")}return e};legend.addTo(map);function getColor(a){return a>1000?"#800026":a>500?"#BD0026":a>200?"#E31A1C":a>100?"#FC4E2A":a>50?"#FD8D3C":a>20?"#FEB24C":a>10?"#FED976":"#FFEDA0"}function style(a){return{fillColor:getColor(a.properties.density),weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:0.7}}function highlightFeature(b){var a=b.target;a.setStyle({weight:5,color:"#666",dashArray:"",fillOpacity:0.7});if(!L.Browser.ie&&!L.Browser.opera){a.bringToFront()}info.update(a.feature.properties)}function resetHighlight(a){geojson.resetStyle(a.target);info.update()}function zoomToFeature(a){map.fitBounds(a.target.getBounds())}function onEachFeature(b,a){a.on({mouseover:highlightFeature,mouseout:resetHighlight,click:zoomToFeature})};