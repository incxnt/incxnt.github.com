<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8">
        <title></title>
        <style>
            text {
                font: bold 48px monospace;
            }
            .enter {
                fill: green;
            }
            .update {
                fill: #333;
            }
        </style>
    </head>
    <body>
        <div id="d3div"></div>
        <script src="/js/d3-2.10.3/d3.v2.min.js"></script>
        <script>
            var text2012 = "2012/12/21 is coming ...".split("");
            var w = 960;
            var h = 600;
            var svg = d3.select("body").append("svg")
                        .attr("width", w)
                        .attr("height", h)
                        .append("g")
                        .attr("transform", "translate(32," + (h / 2) + ")");
            function update(data) {
                var text = svg.selectAll("text")
                            .data(data);
                text.attr("class", "update");
                text.enter().append("text")
                    .attr("class", "enter")
                    .attr("x", function(d, i) {return i * 32;})
                    .attr("dy", ".35em");
                text.text(function(d) {return d;});
                text.exit().remove();
            }
            update(text2012);
            setInterval(function() {
                update(shuffle(text2012)
                       .slice(0, Math.floor(Math.random() * 26))
                       .sort());
            }, 1500);
            function shuffle(array) {
                var m = array.length, t, i;
                while (m) {
                    i = Math.floor(Math.random() * m--);
                    t = array[m], array[m] = array[i], array[i] = t;
                }
                return array;
            }
        </script>
    </body>
</html>